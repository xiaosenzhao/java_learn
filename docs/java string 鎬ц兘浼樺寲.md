![21882ec2-4c07-4786-8888-a5e7d5a54eac.jpg](https://oss-grow2.alibaba.com/content/2024/03/21882ec2-4c07-4786-8888-a5e7d5a54eac.jpg?Expires=1749785842&OSSAccessKeyId=LTAI5tMHgGsZrXJ6WkiYuXFN&Signature=xNIosf2Yam7PJU76hp5IBg9x7C8%3D)

# 字符串拼接

单线程内推荐使用 StringBuilder，多线程使用 StringBuffer。StringBuffer 涉及锁竞争，性能会差一些。

# String.intern 节省内存

示例

```java
String a =new String("abc").intern();
String b = new String("abc").intern();
    	  
if(a==b) {
    System.out.print("a==b"); 
}
// 输出 a==b
```

+ 在字符串常量中，默认会将对象放入常量池

+ 在字符串变量中，String 对象是会创建在堆内存中，同时也会在常量池中创建一个字符串对象，String对象中的char数组将会引用常量池中的char数组，并返回堆内存对象引用。

如果调用intern方法，会去查看字符串常量池中是否有等于该对象的字符串的引用，如果没有，在JDK1.6版本中会复制堆中的字符串到常量池中，并返回该字符串引用，堆内存中原有的字符串由于没有引用指向它，将会通过垃圾回收器回收。在JDK1.7版本以后，由于常量池已经合并到了堆中，所以不会再复制具体字符串了，只是会把首次遇到的字符串的引用添加到常量池中；如果有，就返回常量池中的字符串引用。

如果在运行时，创建字符串对象，将会直接在堆内存中创建，不会在常量池中创建。所以动态创建的字符串对象，调用intern方法，在JDK1.6版本中会去常量池中创建运行时常量以及返回字符串引用，在JDK1.7版本之后，会将堆中的字符串常量的引用放入到常量池中，当其它堆中的字符串对象通过intern方法获取字符串对象引用时，则会去常量池中判断是否有相同值的字符串的引用，此时有，则返回该常量池中字符串引用，跟之前的字符串指向同一地址的字符串对象。

使用intern方法需要注意的一点是，一定要结合实际场景。因为常量池的实现是类似于一个HashTable的实现方式，HashTable存储的数据越大，遍历的时间复杂度就会增加。如果数据过大，会增加整个字符串常量池的负担。

# 字符串分割

+ Split()方法使用了正则表达式实现了其强大的分割功能，而正则表达式的性能是非常不稳定的，使用不恰当会引起回溯问题，很可能导致CPU居高不下。

+ 可以用String.indexOf()方法代替Split()方法完成字符串的分割

  